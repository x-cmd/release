
(
inner(){
    git branch -r | awk '{
        gsub("^[^/]+/", "", $1)
        print $1
    }' | awk '$1~/^v/{
        print $1
    }'
}

buildone(){
    local version=${1:?Provide version}
    local tgz="${2:?Provide tgt path}"
    # version
    git checkout "$version" || return 1
    x z $tgz mod mod.index.txt mod.sha512.txt reference.txt version_sum X LICENSE license_of_components
    git checkout latest
}

TGT="$(x wsroot)/dist"

build(){
    inner | while read -r v; do
        buildone $v "$TGT/$v.tgz"
    done
}

xws cdb build
)

